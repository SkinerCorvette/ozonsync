<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoPro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<header>
    <h1>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤</h1>
    <div id="authStatus" class="hidden">
        <span id="welcomeMessage"></span>
        <button id="logoutBtn">–í—ã–π—Ç–∏</button>
    </div>
</header>

<main>
    <div id="authForms" class="card">
        <h2>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>

        <form id="loginForm">
            <h3>–í–æ–π—Ç–∏</h3>
            <input type="text" id="loginUsername" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
            <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
            <label class="auth-checkbox">
                <input type="checkbox" id="toggleLoginPassword">
                <span>–ü–æ–∫–∞–∑–∞—Ç—å –ø–∞—Ä–æ–ª—å</span>
            </label>
            <button type="submit">–í–æ–π—Ç–∏</button>
            <p class="error" id="loginError" style="display: none;"></p>
            <p>–ï—â—ë –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" id="showRegisterLink">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
        </form>

        <form id="registerForm" class="hidden">
            <h3>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</h3>
            <input type="text" id="registerUsername" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required>
            <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
            <input type="password" id="confirmPassword" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>
            <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            <p class="error" id="registerError" style="display: none;"></p>
            <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" id="showLoginLink">–í–æ–π—Ç–∏</a></p>
        </form>
    </div>

    <div id="topActions" class="top-actions hidden">
        <button id="loadFromDbBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã</button>
        <button id="getProductsBtn">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã —Å Ozon</button>
    </div>

    <div id="emptyDbMessage" class="hidden card" style="max-width: 900px; width: 100%; margin: 0 auto 18px; text-align:center;">
        –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤. –ù–∞–∂–º–∏—Ç–µ ‚Äú–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã —Å Ozon‚Äù, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏—Ö.
    </div>

    <div id="loadingMessage" class="hidden">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</div>
    <div id="errorMessage" class="hidden error">–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.</div>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <div id="filters" class="hidden card">
        <h2>–§–∏–ª—å—Ç—Ä—ã</h2>
        <div class="filters-row">
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é">
            <input type="number" id="minPriceInput" placeholder="–¶–µ–Ω–∞ –æ—Ç">
            <input type="number" id="maxPriceInput" placeholder="–¶–µ–Ω–∞ –¥–æ">
            <select id="sortBySelect">
               <option value="last_synced" selected>–ü–æ –¥–∞—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</option>
               <option value="price">–ü–æ —Ü–µ–Ω–µ</option>
               <option value="name">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
            </select>

            <select id="sortDirSelect">
               <option value="desc" selected>–ü–æ —É–±—ã–≤–∞–Ω–∏—é</option>
               <option value="asc">–ü–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é</option>
            </select>

            <button id="applyFiltersBtn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
    </div>

    <div id="productsContainer" class="hidden card">
        <div class="products-header">
            <h2>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h2>
            <button id="addProductBtn" class="secondary-btn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
        </div>

        <div class="tabs">
            <button id="tabActive" class="tab-btn tab-active">–¢–æ–≤–∞—Ä—ã</button>
            <button id="tabArchive" class="tab-btn">–ê—Ä—Ö–∏–≤ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö</button>
        </div>

        <div id="archiveEmpty" class="hidden archive-empty">
            –ê—Ä—Ö–∏–≤ –ø—É—Å—Ç, —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ—Ç.
        </div>

        <ul id="productsList">
        </ul>

        <div id="pagination" class="hidden">
            <button id="prevPageBtn">&laquo; –ù–∞–∑–∞–¥</button>
            <span id="pageInfo">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1</span>
            <button id="nextPageBtn">–í–ø–µ—Ä—ë–¥ &raquo;</button>
        </div>
    </div>

    <div id="syncLogsContainer" class="card hidden">
        <h2>–ò—Å—Ç–æ—Ä–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π</h2>
        <table id="syncLogsTable">
        <thead>
            <tr>
                <th>–ù–∞—á–∞–ª–æ</th>
                <th>–û–∫–æ–Ω—á–∞–Ω–∏–µ</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤</th>
                <th>–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ</th>
            </tr>
        </thead>
        <tbody id="syncLogsBody">
        </tbody>
        </table>
    </div>

    <div id="productModal" class="modal hidden">
        <div class="modal-content">
            <span id="modalClose" class="modal-close">&times;</span>
            <div class="modal-body">
                <div class="modal-left">
                    <div class="modal-image-wrapper">
                        <img id="modalImage" src="" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" class="modal-image">
                    </div>
                    <p class="modal-sync">
                        <strong>–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:</strong>
                        <span id="modalLastSynced">‚Äî</span>
                    </p>
                </div>

                <div class="modal-right">
                    <h2 id="modalTitle">–¢–æ–≤–∞—Ä</h2>

                    <div class="modal-grid">
                        <label class="modal-field">
                            <span>–ù–∞–∑–≤–∞–Ω–∏–µ</span>
                            <input type="text" id="modalNameInput" maxlength="120">
                            <small id="nameCounter" class="field-counter">0 / 120</small>
                        </label>

                        <label class="modal-field">
                            <span>Offer ID</span>
                            <input type="text" id="modalOfferIdInput">
                        </label>

                        <label class="modal-field">
                            <span>Product ID</span>
                            <input type="text" id="modalProductIdInput">
                        </label>

                        <label class="modal-field">
                            <span>–¶–µ–Ω–∞ (RUB)</span>
                            <input type="number" step="0.01" id="modalPriceInput">
                        </label>

                        <label class="modal-field">
                            <span>–û—Å—Ç–∞—Ç–æ–∫ (—à—Ç.)</span>
                            <input type="text" id="modalStockInput" min="0" step="1">
                        </label>

                        <label class="modal-field full-width">
                            <span>URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</span>
                            <input type="text" id="modalImageUrlInput" maxlength="400">
                            <small id="urlCounter" class="field-counter">0 / 400</small>
                        </label>
                    </div>

                    <div class="modal-actions">
                        <button id="modalSaveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button id="modalHistoryBtn" class="secondary-btn" type="button">–ò—Å—Ç–æ—Ä–∏—è</button>
                        <button id="modalDeleteBtn" class="danger-btn">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>

                    <p id="modalFormError" class="error hidden"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="syncOptionsModal" class="modal hidden">
            <div class="modal-content sync-modal">
                <span id="syncOptionsClose" class="modal-close">&times;</span>

                <h2 class="sync-modal-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</h2>

                <div class="sync-modal-options">
                    <label class="sync-option">
                        <input type="checkbox" id="overwriteManualCheckbox">
                        <span>–ü–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –≤—Ä—É—á–Ω—É—é –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</span>
                    </label>

                    <label class="sync-option">
                        <input type="checkbox" id="overwriteHiddenCheckbox">
                        <span>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ (–∞—Ä—Ö–∏–≤–Ω—ã–µ) —Ç–æ–≤–∞—Ä—ã</span>
                    </label>
                </div>

                <div class="modal-actions sync-modal-actions">
                    <button id="confirmSyncBtn">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button id="cancelSyncBtn" class="secondary-btn">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <div id="historyModal" class="modal hidden">
            <div class="modal-content sync-modal">
                <span id="historyClose" class="modal-close">&times;</span>
                <h2 class="sync-modal-title">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</h2>

                <div id="historyBody" class="history-body">
     
                </div>

                <div class="modal-actions sync-modal-actions">
                <button id="historyCloseBtn" class="secondary-btn" type="button">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>

</main>

<footer>
    <p>¬© 2025 –ê–≤—Ç–æ–ü—Ä–æ</p>
</footer>

<script src="{{ url_for('static', filename='script.js') }}?v=6"></script>

<div id="dashboardToggle" class="dashboard-toggle hidden">
    üìä
</div>

<!-- –ë–æ–∫–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å -->
<div id="dashboardPanel" class="dashboard-panel hidden">
    <h2>–ê–Ω–∞–ª–∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</h2>

    <div class="dashboard-stats">
        <div class="stat">
            <span class="stat-label">–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤:</span>
            <span id="statTotal">0</span>
        </div>

        <div class="stat">
            <span class="stat-label">–°–∫—Ä—ã—Ç—ã—Ö:</span>
            <span id="statHidden">0</span>
        </div>

        <div class="stat">
            <span class="stat-label">–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö:</span>
            <span id="statManual">0</span>
        </div>

        <div class="stat">
            <span class="stat-label">–° –Ω—É–ª–µ–≤—ã–º –æ—Å—Ç–∞—Ç–∫–æ–º:</span>
            <span id="statOutOfStock">0</span>
        </div>

        <div class="stat">
            <span class="stat-label">–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞:</span>
            <span id="statAvgPrice">0 ‚ÇΩ</span>
        </div>
    </div>
</div>
</body>
</html>


